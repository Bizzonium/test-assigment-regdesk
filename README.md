# Test Assigment

## Terms

## TODO

What could be improved or considered:

- [ ] Cascade removal for Documents/Fields/Users (mongoose middlewares? background job?)
- [ ] Perform MongoDB operations in batches
- [ ] Figure out proper recursive zod types in contracts for Fields and Documents
- [ ] Virtual population when getting Document's fields, for example, and caching it with regeneration on changes?
- [ ] Unit testing
- [ ] E2E testing

## Structure

This monorepo uses [Turborepo](https://turborepo.org) and contains:

```text
.github
  └─ workflows
        └─ CI with pnpm cache setup
.vscode
  └─ Recommended extensions and settings for VSCode users
apps
  └─ backend
      ├─ NestJS
      ├─ E2E Typesafe API Server (ts-rest, zod)
      ├─ OpenAPI schemas
      └─ Swagger
packages
  ├─ common
  |   └─ shared code: types, util functions
  ├─ contracts
  |   └─ REST API schema
  └─ env
      └─ Typesafe environment variables
tooling
  ├─ commitlint
  |   └─ helps follow commit convention
  ├─ eslint
  |   └─ shared, fine-grained, eslint presets
  ├─ lintstaged
  |   └─ lint only staged code
  ├─ prettier
  |   └─ shared prettier configuration
  ├─ tailwind
  |   └─ shared tailwind configuration
  └─ typescript
      └─ shared tsconfig you can extend from
```

## Quick Start

To get it running, follow the steps below:

### 1. Setup dependencies

```bash
# Install dependencies
pnpm i

# Configure local environment variables
# There is an `.env` in the root directory you can use for reference
cp .env .env.local
```

### 2. Start

In VS Code you could launch a debug task (`F5`) or run `pnpm dev` in the project root folder.
After launching navigate to Swagger page http://localhost:3000/api

> **TIP:** It might be easier to run each app in separate terminal windows so you get the logs from each app separately. You can run `pnpm dev --filter backend` and `pnpm dev --filter web` to run each app in a separate terminal window.

> **TIP:** You could import OpenAPI JSON schema generated by Swagger to Postman at http://localhost:3000/api-json

### 3. When it's time to add a new package

> **Note:** removed this feature for now

To add a new package, simply run `pnpm turbo gen init` in the monorepo root. This will prompt you for a package name as well as if you want to install any dependencies to the new package (of course you can also do this yourself later).

The generator sets up the `package.json`, `tsconfig.json` and a `index.ts`, as well as configures all the necessary configurations for tooling around your package such as formatting, linting and typechecking. When the package is created, you're ready to go build out the package.
